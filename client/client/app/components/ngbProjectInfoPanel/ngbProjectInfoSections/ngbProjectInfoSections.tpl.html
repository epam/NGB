<md-menu>
  <md-button aria-label="Project info"
             class="md-icon-button project-info-button"
             style="width: auto; padding-left: 7px"
             ng-click="$ctrl.onButtonClick($mdOpenMenu, $event)"
  >
    <span>{{$ctrl.ngbProjectInfoService.currentName}}</span>
    <ng-md-icon icon="keyboard_arrow_down"
                ng-click="$ctrl.openMenu($mdOpenMenu, $event)" size="20"></ng-md-icon>
  </md-button>
  <md-menu-content width="4" class="ngb-project-info-sections-menu" md-whiteframe="4">
    <md-checkbox aria-label="Summary" ng-if="$ctrl.ngbProjectInfoService.summaryAvailable"
                 ng-false-value="{{$ctrl.ngbProjectInfoService.projectInfoModeList.DESCRIPTION}}"
                 ng-model="$ctrl.ngbProjectInfoService.currentMode"
                 ng-true-value="{{$ctrl.ngbProjectInfoService.projectInfoModeList.SUMMARY}}">
      <span>Summary</span>
    </md-checkbox>
    <span ng-if="$ctrl.ngbProjectInfoService.projects.length"
          class="project-info-menu-content"
          ng-repeat="project in $ctrl.ngbProjectInfoService.projects track by project.id">
      <md-divider ng-if="$ctrl.ngbProjectInfoService.projects.length > 1"></md-divider>
      <md-menu-item ng-if="$ctrl.ngbProjectInfoService.projects.length > 1"
                    class="project-info-menu-item">
        {{project.name}}
      </md-menu-item>
      <md-checkbox ng-if="project.descriptions"
                   aria-label="{{description.name}}"
                   ng-repeat="description in project.descriptions track by description.id"
                   ng-model="$ctrl.ngbProjectInfoService.currentMode"
                   class="project-info-menu-checkbox"
                   ng-true-value="{{[
                       $ctrl.ngbProjectInfoService.projectInfoModeList.DESCRIPTION,
                       description.id
                    ]}}"
                   ng-false-value="{{$ctrl.ngbProjectInfoService.projectInfoModeList.SUMMARY}}"
                   ng-click="$ctrl.setDescription(project, description.id)">
        <span>{{description.name}}</span>
      </md-checkbox>
      <md-divider ng-if="project.descriptions"></md-divider>
      <md-menu-item ng-if="project.canEdit"
                    class="ngb-project-info-sections-add-note">
        <div ng-click="$ctrl.ngbProjectInfoService.addNote(project)">+ Add note</div>
      </md-menu-item>
      <md-divider ng-if="$ctrl.ngbProjectInfoService.projects.length > 1 && project.notes.length"></md-divider>
      <md-checkbox aria-label="{{note.title}}"
                   ng-false-value="undefined"
                   ng-model="$ctrl.ngbProjectInfoService.currentMode"
                   ng-repeat="(index, note) in project.notes track by note.id"
                   ng-true-value="{{note.id}}"
                   class="project-info-menu-checkbox"
                   ng-click=$ctrl.setCurrentProject(project)>
        <span>{{note.title}}</span>
      </md-checkbox>
    </span>
  </md-menu-content>
</md-menu>
<div class="ngb-project-info-sections-divider"
     ng-if="$ctrl.ngbProjectInfoService.summaryAvailable && $ctrl.descriptionAvailable">
  &nbsp
</div>
