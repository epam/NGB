<md-menu>
  <md-button aria-label="Project info"
             class="md-icon-button project-info-button"
             style="width: auto; padding-left: 7px"
             ng-click="$ctrl.onButtonClick($mdOpenMenu, $event)"
  >
    <span>{{$ctrl.ngbProjectInfoService.currentName}}</span>
    <ng-md-icon icon="keyboard_arrow_down"
                ng-click="$ctrl.openMenu($mdOpenMenu, $event)" size="20"></ng-md-icon>
  </md-button>
  <md-menu-content width="4" class="ngb-project-info-sections-menu" md-whiteframe="4">
    <md-checkbox aria-label="Summary" ng-if="$ctrl.ngbProjectInfoService.summaryAvailable"
                 ng-false-value="{{$ctrl.ngbProjectInfoService.projectInfoModeList.DESCRIPTION}}"
                 ng-model="$ctrl.ngbProjectInfoService.currentMode"
                 ng-true-value="{{$ctrl.ngbProjectInfoService.projectInfoModeList.SUMMARY}}">
      <span>Summary</span>
    </md-checkbox>
    <span ng-if="$ctrl.extendedMode"
          class="project-info-menu-content"
          ng-repeat="project in $ctrl.ngbProjectInfoService.projects track by project.id">
      <md-divider></md-divider>
      <md-menu-item class="project-info-menu-item">
        {{project.name}}
      </md-menu-item>
      <md-checkbox aria-label="Description"
                   ng-if="project.descriptionAvailable"
                   ng-model="$ctrl.ngbProjectInfoService.currentMode"
                   ng-true-value="{{[$ctrl.ngbProjectInfoService.projectInfoModeList.DESCRIPTION, project.id]}}"
                   ng-false-value="{{$ctrl.ngbProjectInfoService.projectInfoModeList.SUMMARY}}"
                   ng-click=$ctrl.setDescription(project)>
        <span>Description</span>
      </md-checkbox>
      <md-menu-item ng-if="project.canEdit"
                    class="ngb-project-info-sections-add-note">
        <div ng-click="$ctrl.ngbProjectInfoService.addNote(project)">+ Add note</div>
      </md-menu-item>
      <md-checkbox aria-label="{{note.title}}"
                   ng-false-value="undefined"
                   ng-model="$ctrl.ngbProjectInfoService.currentMode"
                   ng-repeat="(index, note) in project.notes track by note.id"
                   ng-true-value="{{note.id}}"
                   class="project-info-menu-note"
                   ng-click=$ctrl.setCurrentProject(project)>
        <span>{{note.title}}</span>
      </md-checkbox>
    </span>
    <span ng-if="!$ctrl.extendedMode"
          class="project-info-menu-content">
      <md-checkbox aria-label="Description"
                 ng-if="$ctrl.descriptionAvailable"
                 ng-false-value="{{$ctrl.ngbProjectInfoService.projectInfoModeList.SUMMARY}}"
                 ng-model="$ctrl.ngbProjectInfoService.currentMode"
                 ng-true-value="{{$ctrl.ngbProjectInfoService.projectInfoModeList.DESCRIPTION}}"
      >
        <span>Description</span>
      </md-checkbox>
      <md-divider ng-if="$ctrl.ngbProjectInfoService.canEdit"></md-divider>
      <md-menu-item class="ngb-project-info-sections-add-note" ng-if="$ctrl.ngbProjectInfoService.canEdit">
        <div ng-click="$ctrl.ngbProjectInfoService.addNote()">+ Add note</div>
      </md-menu-item>
      <md-divider ng-if="$ctrl.ngbProjectInfoService.noteList.length"></md-divider>
      <md-checkbox aria-label="{{note.title}}"
                   ng-false-value="undefined"
                   ng-model="$ctrl.ngbProjectInfoService.currentMode"
                   ng-repeat="(index, note) in $ctrl.ngbProjectInfoService.noteList track by note.id"
                   ng-true-value="{{note.id}}"
                   class="project-info-menu-note">
        <span>{{note.title}}</span>
      </md-checkbox>
    </span>
  </md-menu-content>
</md-menu>
<div class="ngb-project-info-sections-divider"
     ng-if="$ctrl.ngbProjectInfoService.summaryAvailable && $ctrl.descriptionAvailable">
  &nbsp
</div>
