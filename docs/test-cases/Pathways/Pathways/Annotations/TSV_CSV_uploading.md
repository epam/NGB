#Annotations with uploading TSV/CSV files

Test verifies
- applying colorization to Pathway's map nodes using a CSV/TSV file

**Prerequisites**:
1. Go to NGB
2. Close **PATHWAYS** panel if it is opened

Create .csv file = **pathway-ann.csv**
```
Gene,Tetm,Clp
Tetm,0.55,0.98
Tetp,0.04,1
Laclm,0.33,0.45
Clp,0.29,0.89
f6p,0.29,0.89
```

| Steps | Actions                                                 | Expected results                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|-------|---------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1     | Login to NGB                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 2     | Go to DATASETS panel                                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 3     | Open **PATHWAYS** panel from **VIEWS** menu             | **PATHWAYS** panel is displayed first at the right side in the additional panels and consists of the following elements: <li>  **Search keyword**(mandatory) - empty field <li> **SEARCH** button - disabled by default <li>"**Type keyword to start search.**" phrase displays in the panel                                                                                                                                                                                                                                                                                                                                          |
| 4     | Enter **BRCA1** into **Search keyword** field           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 5     | Click **SEARCH** button                                 | A table with corresponding search results are displayed in the PATHWAYS panel:<br/> - **Map** (*hyperlink, sortable*) - map name <br/> - **Description** - map description <br/> - **Source** - map source  <br><br> Search results are displayed in the table: <br> <table><tr><th>Map</th><th>Description</th><th>Source</th><tr><td>BRCA1</td><td>BRCA1 test</td><td>Custom</td></tr></table>                                                                                                                                                                                                                                      |
| 6     | Click on the **BRCA1** hyperlink in the **Map** column  | The new form with map details is opened in the same window instead previous list and contains from: <br><br><li> **<** (**Return**) - button to return to the previous table (with all found maps) displays at the top of sub-tab <li> **Map name label** (*BRCA1*)  - displays to the right of **Return** button  <li> **i** (**Info**) - label near the map name (by navigate this button a tooltip appears with the full map description)  <li>*Additional capabilities section* displays below map label:<br> - **Search** field (*empty by default*)<br>  - **Loupe** button <br> - **Annotation** button</ul> <li>*Map* image   |                                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 7     | Click **Annotation** button                             | **Add annotation** modal window is opened with following values inside: <li> **Annotation name** - text input field for specifying annotation name (optional) <li> **Select heatmap file** checkbox - *to load heatmap file registered in NGB*  <li> **Select VCF file** checkbox - *to load variation file registered in NGB (disabled by default)* <li> **Upload TSV/CSV** checkbox - *to load annotation file from the local workstation (in TSV/CSV format)* <li> **Manual colors config** checkbox - *for specifying annotation in plain text format* <br><br> <li>**Apply** button - disabled by default <li> **Cancel** button |                                                                                                   | 
| 8     | Set checkbox in **Upload TSV/CSV** field                | <li> **Choose TSV/CSV file** button is appeared<li> 2 pathway objects display below dropdown field: <br/> - **in first column** checkbox (set by default) <br/>  - **first row** checkbox<li> **Annotation name** field is empty <li> **Apply** button is disabled                                                                                                                                                                                                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 9     | Click **Choose CSV/TSV file** and select file           | <li> Annotation name field is automatically filled by selected file name = **pathway-ann.csv**<li> The following values displays below **Pathway objects** field: <li> Type = Continuous <li> Block of the colors settings: High, Middle, Low, Missing data  <li> **Apply** button is enabled                                                                                                                                                                                                                                                                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 10    | Click **Apply** button                                  | <li>**Add annotation** modal window is closed <li> Saved annotation is appeared in the new **Annotations** pop-up window <li> Annotation name displays as hyperlink  <li> Checkbox displays near the annotation name - *to enable (apply) it or disable* <li> The checkbox is set automatically <li> Remove button displays near the annotation name - *to remove the annotation from the list*                                                                                                                                                                                                                                       |
| 11    | Look at the map                                         | 3 colors is configured - for minimum value (from all matrix), for maximum value (from all matrix) and middle value (average between minimum and maximum). <li>Colors for all other values in matrix are selected from a gradient according to these three: <br> <table><tr><th>Node name</th><th>Node color</th><tr><td>Tetm</td><td>yellow\red</td><tr><td>Tetp</td><td>green\red</td><tr><td>Laclp</td><td>green</td></tr><tr><td>Laclm</td><td>green/light-green</td><tr><td>Clp</td><td>green/red</td></table> <li> All other nodes are not colored                                                                               |
| 12    | Click **pathway-ann** in **Annotations** pop-up         | <li> **Add annotation** modal window is opened                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 13    | Set checkbox in **first row** objects                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 14    | Click **Apply** button                                  | <li>**Add annotation** modal window is closed <li> Saved annotation displays as hyperlink in **Annotations** pop-up window = **pathway-ann**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 15    | Look at the map                                         | 3 colors is configured - for minimum value (from all matrix), for maximum value (from all matrix) and middle value (average between minimum and maximum). <li>Colors for all other values in matrix are selected from a gradient according to these three: <br> <table><tr><th>Node name</th><th>Node color</th><tr><td>Tetm</td><td>green/red\red</td><tr><td>Clp</td><td>green\light-green</td></table>                                                                                                                                                                                                                             |
| 16    | Click **pathway-ann** in **Annotations** pop-up | <li> **Add annotation** modal window is opened                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 17    | Select **Discrete** type and Apply changes              | <li> For each specific value of the matrix the color is configured (or color(s) for value range(s))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 18    | Look at the map                                         | <li>Each pathway object from the matrix colorized in the defined color <li>Defined color(s) for the object is determined from the value corresponding to that object in the matrix and from the defined gradient <li> Only object background color is changed <li>For the object with several values in the matrix: object is colorized in all these colors equally (from left to right in the order as values are specified in matrix)                                                                                                                                                                                               |
