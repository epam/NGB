# Search sub-tab

Test verifies
 - UI view of Search sub-tab
  
**Prerequisites**:
 - Go to NGB
 - Close **Blast** panel if it is opened

| Steps | Actions | Expected results |
| :---: | --- | --- |
| 1 | Login to NGB | |
| 2 | Go to  **Views** menu on the main toolbar| <li> **Views** menu is displayed <li> **BLAST** panel is displayed after Variants panel|
| 3 | Select **BLAST** panel| <li>**BLAST** panel is displayed first at the right side in the additional panels <li> **BLAST** panel has 2 tabs: **Search** and **History**  <li> **Search** tab **is opened by default** and consists of the following visual blocks and fields: <li> Selector of the tool section (mandatory) <li> **Query sequence** (mandatory) - text field <li> **Task title** (optional) - text field <li> **Database** (mandatory) - dropdown list <li> **Organisms** (optional) - text field with dropdown list <li> **Algorithm** (mandatory) - dropdown list <li> **Additional parameters** section (optional)<li> **Search** button  |
| 4 | Look at **selector of the tool**|  Selector of the tool consists of 5 search tools: <li> **blastn** - for the search over nucleotide databases using a nucleotide query. This tool is selected by default, if user clicked the "BLASTn Search" for any read/feature/gene on the GUI <li> **blastp** - for the search over protein databases using a protein query. This tool is selected by default, if user clicked the "BLASTp Search" for any read/feature/gne on the GUI <li> **blastx**  -  for the search over protein databases using a translated nucleotide query <li> **tblastn** - for the search over translated nucleotide databases using a protein query <li> **tblastx** - for the search over translated nucleotide databases using a translated nucleotide query <li> Selected tool is displayed in blue with white text <li> All other non-active tools have grey background and grey text|
| 5 | Look  at **blastn** tool | <li> **blastn** selector is selected by default  <li> **blastn** selector is displayed in blue with white text (when it active) <li> All other sub-tabs have grey background and grey text (when it is non active) |
| 6 | Go to **Query sequence** field | <li> **Query sequence** field is empty if the panel is opened from Views menu <li>**Query sequence** field is automatically inserted into the text field when user had selected the existing sequence in the browser (e.g. read/feature/gene/exon/transcript) <li> Under the **Query sequence** field there is a checkbox **'or upload a file'** that activates the button **Choose file**|
| 7 | Set checkbox in the **'or upload a file'**| <li> **Choose file** button is active <li> **Query sequence** field is disabled| 
| 8 | Look at **Task title** field| <li> **Task title** field is blank by default <li> In this field, user may specify the title for the current search operation|
| 9 | Look at **Algorithm** field  |  The data in the Algorithm field is auto-filled and the data in it is displayed depending on the selected search tool <li> For the blastn tool, there should be:<ul><li> **megablast** (highly similar sequences)** - default value <li> **discontiguous megablast** (more dissimilar sequences) <li> **blastn** (somewhat similar sequences) <li> **blastn-short** (optimized for sequences less than 30 nucleotides) </ul><li> For the blastp tool, there should be: <ul><li> **blastp** (protein-protein BLAST) - default value <li> **blastp-short** (optimized for query sequences shorter than 30 residues) <li> **blastp-fast** (faster version that uses a larger word-size) </ul><li> For the **blastx** tool, there should be: <ul><li> **blastx** (search proteins using a translated nucleotide query) - default value <li> **blastx-fast** (faster version that uses a larger word-size) </ul><li> For the **tblastn** tool, there should be: <ul><li> **tblastn** (search translated nucleotide databases using a protein query) - default value <li> **tblastn-fast** (faster version that uses a larger word-size) </ul><li> For the **tblastx** tool, this dropdown list is unavailable (invisible) |
| 10 | Hover over ***i*** icon near the **Algorithm** field for each Tool type | Help tooltip with list of all available algorithms for thia tool type appears |
| 11 | Expand **Additional parameters** section| **Additional parameters** section contains following fields that have default values defined in the System settings: <li> **Max target sequences** (integer, greater than 0) text field allows to set the maximum number of aligned sequences to display in results (CLI BLAST option max_target_seqs). The value `100` is set by default <li> **Expect threshold** (real, greater than 0) field allows to set expect value for saving hits (CLI BLAST option evalue). The value `0.05` is set by default <li> **Options** field allows to specify additional blast options in CLI style. If user will try to specify such options in incorrect format or with incorrect names - they should be ignored during the search|
| 12 | Click  ***i*** icon in the  **Additional parameters** section for each tool type | Help with table of additional blast options in CLI style available for selected tool type and there possibility values is opens in the new browser tab |
| 13 | Look at **Search** button| <li> **Search** button displays in the lower right corner <li> **Search** button is disabled by default and has light grey color of button with dark-grey text <li> **Search** button becomes active (button becomes light blue white text) if all mandatory fields are filled <li> When you click on the **Search** button, the search by sequence starts and redirects to the **History** sub-tab|